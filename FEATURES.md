# 🎉 新增功能说明

## 1. 兑换码系统

### 功能位置
- 首页顶部导航栏 - **🎁 兑换码** 按钮（粉色）

### 使用方法
1. 点击顶部导航栏的"兑换码"按钮
2. 在输入框中输入兑换码
3. 点击"兑换"按钮

### 可用兑换码
- **`主任真帅`** - 获得 100 次抽奖机会
  - ✅ 可重复领取（每次输入都有效）
  - 💡 可以多次输入获得无限抽奖次数

### 技术实现
- 兑换码存储在 Pinia Store 中
- 刷新页面后会重置（无后端数据库）
- 支持验证和奖励发放

---

## 2. 抽奖统计系统

### 功能位置
- 首页顶部导航栏 - **📊 统计** 按钮（绿色）
- 背包页面也会显示简略统计

### 统计内容

#### 核心数据
- **总抽奖次数** - 已经抽了多少次
- **总价值** - 所有获得物品的总价值（石头）
- **平均价值** - 每次抽奖的平均收益

#### 欧气评价
根据总价值计算欧气值，给出评价：

| 评价 | 欧气值 | 表情 |
|------|--------|------|
| 超级大欧皇 | > 50% | 👑 |
| 欧皇 | > 30% | ✨ |
| 普通人 | > 15% | 😐 |
| 非酋 | > 5% | 😭 |
| 超级大非酋 | ≤ 5% | 💀 |

#### Top 5 最值钱物品
- 展示价值最高的 5 个物品
- 显示物品名称、稀有度、价值
- 标注是否为重复物品

#### 稀有度分布图
- 可视化展示各稀有度的获取数量
- 使用进度条显示分布比例

---

## 3. 背包页面优化

### 新增内容
背包页面现在显示：
1. **统计摘要**
   - 已抽奖次数
   - 平均价值

2. **欧气评价**
   - 显示当前评价和表情
   - 使用对应颜色标识

---

## 4. UI 优化

### 顶部导航栏布局
从左到右：
1. 📊 统计 - 绿色按钮
2. 🎁 兑换码 - 粉色按钮
3. 🎰 剩余抽数 - 黄色显示
4. 💎 棱彩石 - 蓝色显示
5. 🎒 背包 - 紫色按钮

---

## 💡 使用场景示例

### 场景 1：获得额外抽奖次数
```
1. 点击"兑换码"按钮
2. 输入"主任真帅"
3. 点击"兑换"
4. 获得 +100 抽
5. 可以继续输入再次获得
```

### 场景 2：查看自己的欧气
```
1. 抽完奖后
2. 点击"统计"按钮
3. 查看评价（比如"超级大欧皇"）
4. 查看 Top 5 最值钱物品
```

### 场景 3：在背包中查看概况
```
1. 点击"背包"按钮
2. 看到石头数量
3. 看到统计摘要（抽奖次数、平均价值）
4. 看到当前评价
5. 兑换未拥有的物品
```

---

## 🔧 技术细节

### 数据结构
```typescript
// 兑换码记录
redeemedCodes: Record<string, number> // { '主任真帅': 3 } - 记录兑换次数

// 统计信息（计算属性）
totalSpins: number        // 总抽奖次数
totalValue: number        // 总价值
averageValue: number      // 平均价值
gachaRating: {            // 评价
  title: string,          // 评价名称
  emoji: string,          // 表情符号
  color: string           // 颜色类名
}
top5Items: Item[]         // Top 5 物品
```

### 价值计算逻辑
- **新物品**：按完整兑换价格计算
- **重复物品**：按转化的石头数量计算
- **Common 物品**：按获得的石头数量计算

### 欧气值计算
```
欧气值 = 总价值 / (总抽奖次数 × 600)
600 = Mythic 物品的价格（理论最大值）
```

---

## 🎯 未来可扩展

1. **更多兑换码**
   - 在 `user.ts` 的 `redeemCode` 函数中添加
   - 支持不同奖励类型（石头、指定物品等）

2. **成就系统**
   - 基于统计数据的成就
   - 比如"单抽中神话"、"全收集"等

3. **历史记录导出**
   - 导出抽奖记录为图片
   - 分享到朋友圈

4. **持久化存储**
   - 使用 localStorage 保存进度
   - 刷新页面不丢失数据

---

## ⚠️ 注意事项

1. **数据不持久化**
   - 当前版本刷新页面后数据清零
   - 兑换码需要重新输入
   - 抽奖记录会丢失

2. **可重复领取**
   - "主任真帅"兑换码没有次数限制
   - 可以无限刷抽奖次数

3. **评价标准**
   - 基于理论最大值计算
   - 实际游戏中概率可能不同

---

## 🎮 完整体验流程

```
1. 访问 http://localhost:5173/
2. 点击"兑换码" → 输入"主任真帅" → 获得 100 抽
3. 选择卡池 → 开始抽奖
4. 抽完后点击"统计" → 查看欧气评价
5. 点击"背包" → 用石头兑换未拥有的物品
6. 重复步骤 2 获得更多抽奖次数
```

祝你好运！🍀
